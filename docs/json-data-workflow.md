# Работа с JSON-данными каталога

Начиная с этого изменения, все исходные данные викторины хранятся в едином файле [`src/data/json/plantData.json`](../src/data/json/plantData.json). Загрузчик [`src/game/dataLoader.js`](../src/game/dataLoader.js) отвечает за сборку итоговых структур (каталога видов, вопросов, индексов сложностей) на основе этого набора. Единственное исключение — букетные задания, для которых мы сохраняем отдельный источник [`src/data/json/bouquetQuestions.json`](../src/data/json/bouquetQuestions.json); он участвует в экспортёрах данных, потому что конвертер изображений не умеет формировать такие записи.

## Добавление нового растения

1. **Имена** – добавьте локализованные названия в раздел `plantNames` внутри [`plantData.json`](../src/data/json/plantData.json). Используйте существующую схему идентификаторов (`100`, `100_1` и т. п.).
2. **Изображения** – укажите карточку изображения в массиве `plantImages`. Файлы должны лежать в `images/` (или `images/bouquets/` для букетов).
3. **Каталог вида** – дополните раздел `species`, прописав `images`, `wrongAnswers` и, при необходимости, `genusId` для наследования настроек из рода.
4. **Род** – если растение относится к новому роду или использует наследование, обновите раздел `genus` (поле `entries`).
5. **Сложность** – при необходимости скорректируйте уровни сложности в блоке `difficulties` (`questionIdsByDifficulty` и `imageIdsByDifficulty`).

После правок запустите `npm run lint` и при необходимости `npm run validate:data`, чтобы убедиться в корректности структуры `plantData.json`. Скрипт [`scripts/verifyGameData.js`](../scripts/verifyGameData.js) остаётся частью `npm test` и проверяет, что загрузчик успешно собирает игровые данные.

## Пересборка пакета данных

- [`scripts/exportDataBundle.mjs`](../scripts/exportDataBundle.mjs) пересобирает `plantData.json` из данных, которые загружает игра (включая параметры растений), сортируя записи и обеспечивая стабильные диффы.
