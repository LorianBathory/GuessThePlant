<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Викторина "Угадай растение"</title>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            margin: 0;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen',
                'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue',
                sans-serif;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        const PlantQuizGame = () => {
            // Данные растений
            const plantsData = [
                { id: 1, name: "1", displayName: "Суккулент с желтыми цветами", image: "images/BeachDaisy.JPG" },
                { id: 2, name: "2", displayName: "Зонтичное растение", image: "images/MoonCarrot.JPG" },
                { id: 3, name: "3", displayName: "Агапантус", image: "images/Agapanthus.JPG" },
                { id: 4, name: "4", displayName: "Бугенвиллия", image: "images/bougainvillea.JPG" },
                { id: 5, name: "5", displayName: "Камелия", image: "images/camelia.JPG" },
                { id: 6, name: "6", displayName: "Гербера", image: "images/Gerbera.JPG" }
            ];

            // Состояния
            const [plants, setPlants] = useState([]);
            const [currentQuestion, setCurrentQuestion] = useState(0);
            const [score, setScore] = useState(0);
            const [gameState, setGameState] = useState('playing');
            const [options, setOptions] = useState([]);
            const [correctAnswer, setCorrectAnswer] = useState('');

            // Функция перемешивания массива
            const shuffleArray = (array) => {
                const shuffled = [...array];
                for (let i = shuffled.length - 1; i > 0; i--) {
                    const j = Math.floor(Math.random() * (i + 1));
                    [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
                }
                return shuffled;
            };

            // Функция генерации вариантов ответов
            const generateOptions = (correctPlant) => {
                const correctName = correctPlant.name;
                const incorrectOptions = [];
                
                // Генерируем 3 случайных числа от 1 до 15, исключая правильный ответ
                while (incorrectOptions.length < 3) {
                    const randomNum = Math.floor(Math.random() * 15) + 1;
                    const randomNumStr = randomNum.toString();
                    if (randomNumStr !== correctName && !incorrectOptions.includes(randomNumStr)) {
                        incorrectOptions.push(randomNumStr);
                    }
                }
                
                // Смешиваем варианты ответов
                const allOptions = [correctName, ...incorrectOptions];
                return shuffleArray(allOptions);
            };

            // Инициализация игры
            useEffect(() => {
                const shuffled = shuffleArray(plantsData);
                setPlants(shuffled);
            }, []);

            // Обновление вопроса
            useEffect(() => {
                if (plants.length > 0 && currentQuestion < plants.length) {
                    const currentPlant = plants[currentQuestion];
                    const newOptions = generateOptions(currentPlant);
                    setOptions(newOptions);
                    setCorrectAnswer(currentPlant.name);
                }
            }, [currentQuestion, plants]);

            // Обработка ответа
            const handleAnswer = (selectedAnswer) => {
                if (selectedAnswer === correctAnswer) {
                    setScore(score + 1);
                    setGameState('correct');
                } else {
                    setGameState('incorrect');
                }

                setTimeout(() => {
                    if (currentQuestion + 1 < plants.length) {
                        setCurrentQuestion(currentQuestion + 1);
                        setGameState('playing');
                    } else {
                        setGameState('finished');
                    }
                }, 1500);
            };

            // Перезапуск игры
            const restartGame = () => {
                const shuffled = shuffleArray(plantsData);
                setPlants(shuffled);
                setCurrentQuestion(0);
                setScore(0);
                setGameState('playing');
            };

            // Получение изображения растения
            const getPlantImage = (plant) => {
                if (plant.image.startsWith('images/')) {
                    return React.createElement('img', {
                        key: 'plant-image',
                        src: plant.image,
                        alt: `Растение ${plant.id}`,
                        className: 'w-full h-full object-cover',
                        style: { 
                            border: '6px solid #C29C27'
                        }
                    });
                } else {
                    // Для эмодзи
                    return React.createElement('div', {
                        key: 'plant-emoji',
                        className: 'w-full h-full flex items-center justify-center text-9xl',
                        style: { 
                            border: '6px solid #C29C27',
                            backgroundColor: 'white'
                        }
                    }, plant.image);
                }
            };

            // Экран завершения игры
            if (gameState === 'finished') {
                return React.createElement('div', {
                    className: 'min-h-screen flex items-center justify-center relative',
                    style: { backgroundColor: '#163B3A' }
                }, [
                    // Декоративные золотые полоски
                    React.createElement('div', { key: 'decor1', className: 'absolute top-4 left-4 w-20 h-1', style: { backgroundColor: '#C29C27' } }),
                    React.createElement('div', { key: 'decor2', className: 'absolute top-8 left-8 w-32 h-1', style: { backgroundColor: '#C29C27' } }),
                    React.createElement('div', { key: 'decor3', className: 'absolute bottom-4 right-4 w-20 h-1', style: { backgroundColor: '#C29C27' } }),
                    React.createElement('div', { key: 'decor4', className: 'absolute bottom-8 right-8 w-32 h-1', style: { backgroundColor: '#C29C27' } }),
                    
                    React.createElement('div', {
                        key: 'result',
                        className: 'p-8 shadow-lg text-center max-w-md mx-4',
                        style: { backgroundColor: '#163B3A', border: '6px solid #C29C27' }
                    }, [
                        React.createElement('h1', {
                            key: 'title',
                            className: 'text-4xl font-bold mb-6',
                            style: { color: '#C29C27' }
                        }, `Вы получили ${score} баллов!`),
                        React.createElement('button', {
                            key: 'restart',
                            onClick: restartGame,
                            className: 'px-6 py-3 font-semibold text-white transition-colors hover:opacity-80',
                            style: { backgroundColor: '#163B3A', border: '4px solid #C29C27', color: '#C29C27' }
                        }, 'Играть снова')
                    ])
                ]);
            }

            // Основной экран игры
            return React.createElement('div', {
                className: 'min-h-screen p-4 relative flex items-center justify-center',
                style: { backgroundColor: '#163B3A' }
            }, [
                // Декоративные золотые полоски
                React.createElement('div', { key: 'decor1', className: 'absolute top-4 left-4 w-24 h-1', style: { backgroundColor: '#C29C27' } }),
                React.createElement('div', { key: 'decor2', className: 'absolute top-8 left-8 w-40 h-1', style: { backgroundColor: '#C29C27' } }),
                React.createElement('div', { key: 'decor3', className: 'absolute top-12 left-12 w-16 h-1', style: { backgroundColor: '#C29C27' } }),
                React.createElement('div', { key: 'decor4', className: 'absolute bottom-4 right-4 w-24 h-1', style: { backgroundColor: '#C29C27' } }),
                React.createElement('div', { key: 'decor5', className: 'absolute bottom-8 right-8 w-40 h-1', style: { backgroundColor: '#C29C27' } }),
                React.createElement('div', { key: 'decor6', className: 'absolute bottom-12 right-12 w-16 h-1', style: { backgroundColor: '#C29C27' } }),
                
                React.createElement('div', {
                    key: 'container',
                    className: 'w-full max-w-5xl mx-auto relative z-10'
                }, [
                    // Заголовок со счетчиками
                    React.createElement('div', {
                        key: 'header',
                        className: 'flex justify-between items-center mb-6'
                    }, [
                        React.createElement('div', {
                            key: 'progress',
                            className: 'text-2xl font-bold',
                            style: { color: '#C29C27' }
                        }, `${currentQuestion + 1}/${plants.length}`),
                        React.createElement('div', {
                            key: 'score',
                            className: 'text-2xl font-bold',
                            style: { color: '#C29C27' }
                        }, `Баллы: ${score}`)
                    ]),

                    // Основная область игры
                    React.createElement('div', {
                        key: 'game-area',
                        className: 'p-8 shadow-lg',
                        style: { backgroundColor: '#163B3A', border: '6px solid #C29C27' }
                    }, [
                        // Вопрос
                        React.createElement('h2', {
                            key: 'question',
                            className: 'text-3xl font-bold text-center mb-8',
                            style: { color: '#C29C27' }
                        }, 'Что это за растение?'),

                        // Область изображения (увеличенная)
                        React.createElement('div', {
                            key: 'image-area',
                            className: 'mb-8 flex justify-center',
                            style: { height: '450px' }
                        }, [
                            gameState === 'playing' && plants.length > 0 && currentQuestion < plants.length && 
                                React.createElement('div', {
                                    className: 'h-full',
                                    style: { width: '675px' }
                                }, getPlantImage(plants[currentQuestion])),
                            
                            gameState === 'correct' && React.createElement('div', {
                                className: 'h-full flex items-center justify-center text-6xl font-bold',
                                style: { width: '675px', color: '#C29C27', backgroundColor: '#163B3A', border: '6px solid #C29C27' }
                            }, 'Верно!'),
                            
                            gameState === 'incorrect' && React.createElement('div', {
                                className: 'h-full flex items-center justify-center text-6xl font-bold',
                                style: { width: '675px', color: '#C29C27', backgroundColor: '#163B3A', border: '6px solid #C29C27' }
                            }, 'Неверно!')
                        ]),

                        // Варианты ответов
                        gameState === 'playing' && React.createElement('div', {
                            key: 'options',
                            className: 'grid grid-cols-2 gap-4 max-w-3xl mx-auto'
                        }, options.map((option, index) => 
                            React.createElement('button', {
                                key: `option-${index}`,
                                onClick: () => handleAnswer(option),
                                className: 'py-4 px-6 font-semibold text-xl transition-all duration-200 hover:opacity-80 hover:scale-105',
                                style: { 
                                    backgroundColor: '#163B3A', 
                                    border: '4px solid #C29C27',
                                    color: '#C29C27',
                                    boxShadow: '0 4px 8px rgba(0,0,0,0.3)'
                                }
                            }, `Растение ${option}`)
                        ))
                    ]),

                    // Инструкция внизу
                    React.createElement('div', {
                        key: 'instruction',
                        className: 'text-center mt-6 opacity-75',
                        style: { color: '#C29C27' }
                    }, 'Выберите правильный номер растения')
                ])
            ]);
        };

        // Рендер приложения
        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(React.createElement(PlantQuizGame));
    </script>
</body>
</html>
