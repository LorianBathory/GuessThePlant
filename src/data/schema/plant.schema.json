{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://guess-the-plant/schema/plant.schema.json",
  "title": "Guess The Plant data bundle",
  "description": "Shared schema for validating core data structures described in docs/data-json-schema.md.",
  "type": "object",
  "additionalProperties": false,
  "required": [
    "plantNames",
    "species",
    "plantImages",
    "plantParameters",
    "plantFamilies",
    "difficulties"
  ],
  "properties": {
    "plantNames": {
      "description": "Map of plant IDs to localized names.",
      "$ref": "#/definitions/PlantNameMap"
    },
    "species": {
      "description": "Normalized species catalog derived from plantNames and genus metadata.",
      "$ref": "#/definitions/SpeciesMap"
    },
    "plantImages": {
      "description": "List of available plant image descriptors.",
      "type": "array",
      "items": {
        "$ref": "#/definitions/PlantImage"
      }
    },
    "plantParameters": {
      "description": "Map of plant IDs to lifecycle and horticultural parameters.",
      "$ref": "#/definitions/PlantParameterMap"
    },
    "plantFamilies": {
      "description": "Map of botanical family names to plant IDs.",
      "type": "object",
      "propertyNames": {
        "type": "string",
        "minLength": 1
      },
      "additionalProperties": {
        "$ref": "#/definitions/PlantIdArray"
      }
    },
    "difficulties": {
      "description": "Difficulty metadata shared between plant and bouquet questions.",
      "$ref": "#/definitions/DifficultiesConfig"
    },
    "bouquetQuestions": {
      "description": "Optional list of bouquet question definitions exported for legacy tooling.",
      "type": "array",
      "items": {
        "type": "object"
      }
    },
    "genus": {
      "description": "Optional list of genus definitions exported separately in the code base.",
      "type": "array",
      "items": {
        "$ref": "#/definitions/GenusRecord"
      }
    },
    "plantQuestions": {
      "description": "Optional array mirroring the runtime `plants` quiz entries.",
      "type": "array",
      "items": {
        "$ref": "#/definitions/PlantQuizQuestion"
      }
    }
  },
  "definitions": {
    "PlantId": {
      "title": "Plant identifier",
      "oneOf": [
        {
          "type": "integer",
          "minimum": 0
        },
        {
          "type": "string",
          "pattern": "^\\d+(?:_\\d+)*$"
        }
      ]
    },
    "ImageId": {
      "title": "Image identifier",
      "type": "string",
      "pattern": "^[A-Za-z0-9_]+$"
    },
    "LocalizedName": {
      "type": "object",
      "required": [
        "ru",
        "en",
        "nl",
        "sci"
      ],
      "additionalProperties": false,
      "properties": {
        "ru": {
          "type": "string",
          "minLength": 1
        },
        "en": {
          "type": "string",
          "minLength": 1
        },
        "nl": {
          "type": "string",
          "minLength": 1
        },
        "sci": {
          "type": "string",
          "minLength": 1
        }
      }
    },
    "PlantNameMap": {
      "type": "object",
      "propertyNames": {
        "$ref": "#/definitions/PlantIdString"
      },
      "additionalProperties": {
        "$ref": "#/definitions/LocalizedName"
      }
    },
    "PlantIdString": {
      "type": "string",
      "pattern": "^\\d+(?:_\\d+)*$"
    },
    "SpeciesEntry": {
      "type": "object",
      "required": [
        "id",
        "names"
      ],
      "additionalProperties": false,
      "properties": {
        "id": {
          "$ref": "#/definitions/PlantId"
        },
        "names": {
          "$ref": "#/definitions/LocalizedName"
        },
        "images": {
          "$ref": "#/definitions/ImageIdArray"
        },
        "wrongAnswers": {
          "$ref": "#/definitions/PlantIdArray"
        },
        "genusId": {
          "$ref": "#/definitions/PlantId"
        }
      }
    },
    "SpeciesMap": {
      "type": "object",
      "propertyNames": {
        "$ref": "#/definitions/PlantIdString"
      },
      "additionalProperties": {
        "$ref": "#/definitions/SpeciesEntry"
      }
    },
    "ImageIdArray": {
      "type": "array",
      "items": {
        "$ref": "#/definitions/ImageId"
      },
      "minItems": 0,
      "uniqueItems": true
    },
    "PlantIdArray": {
      "type": "array",
      "items": {
        "$ref": "#/definitions/PlantId"
      },
      "minItems": 0,
      "uniqueItems": true
    },
    "QuestionVariantId": {
      "type": "string",
      "minLength": 1,
      "pattern": "^[A-Za-z0-9_-]+$"
    },
    "QuestionVariantIdArray": {
      "type": "array",
      "items": {
        "$ref": "#/definitions/QuestionVariantId"
      },
      "minItems": 0,
      "uniqueItems": true
    },
    "DifficultyLevels": {
      "type": "object",
      "minProperties": 1,
      "propertyNames": {
        "type": "string",
        "pattern": "^[A-Z_]+$"
      },
      "additionalProperties": {
        "type": "string",
        "minLength": 1
      }
    },
    "DifficultyBucketMap": {
      "type": "object",
      "propertyNames": {
        "type": "string",
        "minLength": 1
      },
      "additionalProperties": {
        "$ref": "#/definitions/PlantIdArray"
      }
    },
    "BouquetDifficultyBucketMap": {
      "type": "object",
      "propertyNames": {
        "type": "string",
        "minLength": 1
      },
      "additionalProperties": {
        "$ref": "#/definitions/QuestionVariantIdArray"
      }
    },
    "ImageDifficultyBucketMap": {
      "type": "object",
      "propertyNames": {
        "type": "string",
        "minLength": 1
      },
      "additionalProperties": {
        "$ref": "#/definitions/ImageIdArray"
      }
    },
    "QuestionDifficultyBuckets": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "plant": {
          "$ref": "#/definitions/DifficultyBucketMap"
        },
        "bouquet": {
          "$ref": "#/definitions/BouquetDifficultyBucketMap"
        }
      }
    },
    "ImageDifficultyBuckets": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "plant": {
          "$ref": "#/definitions/ImageDifficultyBucketMap"
        },
        "bouquet": {
          "$ref": "#/definitions/ImageDifficultyBucketMap"
        }
      }
    },
    "DifficultiesConfig": {
      "type": "object",
      "required": [
        "difficultyLevels",
        "questionIdsByDifficulty",
        "imageIdsByDifficulty"
      ],
      "additionalProperties": false,
      "properties": {
        "difficultyLevels": {
          "$ref": "#/definitions/DifficultyLevels"
        },
        "questionIdsByDifficulty": {
          "$ref": "#/definitions/QuestionDifficultyBuckets"
        },
        "imageIdsByDifficulty": {
          "$ref": "#/definitions/ImageDifficultyBuckets"
        }
      }
    },
    "PlantImage": {
      "type": "object",
      "required": [
        "id",
        "src"
      ],
      "additionalProperties": false,
      "properties": {
        "id": {
          "$ref": "#/definitions/ImageId"
        },
        "src": {
          "type": "string",
          "pattern": "^images/"
        }
      }
    },
    "ToxicityEntry": {
      "type": "object",
      "required": [
        "level",
        "tag"
      ],
      "additionalProperties": false,
      "properties": {
        "level": {
          "type": "integer",
          "minimum": 0
        },
        "tag": {
          "type": "string",
          "minLength": 1
        }
      }
    },
    "PlantParameters": {
      "type": "object",
      "required": [
        "scientificName"
      ],
      "additionalProperties": false,
      "properties": {
        "scientificName": {
          "type": "string",
          "minLength": 1
        },
        "lifeCycle": {
          "type": "string",
          "minLength": 1
        },
        "additionalInfo": {
          "type": "string",
          "minLength": 1
        },
        "toxicity": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/ToxicityEntry"
          },
          "minItems": 1
        },
        "hardinessZone": {
          "type": "string",
          "minLength": 1
        },
        "light": {
          "type": "string",
          "minLength": 1
        },
        "family": {
          "type": [
            "string",
            "null"
          ],
          "minLength": 1
        }
      }
    },
    "PlantParameterMap": {
      "type": "object",
      "propertyNames": {
        "$ref": "#/definitions/PlantIdString"
      },
      "additionalProperties": {
        "$ref": "#/definitions/PlantParameters"
      }
    },
    "GenusEntry": {
      "type": "object",
      "required": [
        "names"
      ],
      "additionalProperties": false,
      "properties": {
        "names": {
          "$ref": "#/definitions/LocalizedName"
        },
        "images": {
          "$ref": "#/definitions/ImageIdArray"
        },
        "wrongAnswers": {
          "$ref": "#/definitions/PlantIdArray"
        }
      }
    },
    "GenusRecord": {
      "type": "object",
      "required": [
        "id",
        "slug",
        "entries"
      ],
      "additionalProperties": false,
      "properties": {
        "id": {
          "$ref": "#/definitions/PlantId"
        },
        "slug": {
          "type": "string",
          "pattern": "^[a-z0-9-]+$"
        },
        "entries": {
          "type": "object",
          "propertyNames": {
            "$ref": "#/definitions/PlantIdString"
          },
          "additionalProperties": {
            "$ref": "#/definitions/GenusEntry"
          }
        },
        "wrongAnswers": {
          "$ref": "#/definitions/PlantIdArray"
        }
      }
    },
    "PlantQuizQuestion": {
      "type": "object",
      "required": [
        "id",
        "correctAnswerId",
        "imageId",
        "image",
        "names",
        "questionVariantId",
        "questionType",
        "selectionGroupId",
        "questionPromptKey"
      ],
      "additionalProperties": false,
      "properties": {
        "id": {
          "$ref": "#/definitions/PlantId"
        },
        "correctAnswerId": {
          "$ref": "#/definitions/PlantId"
        },
        "imageId": {
          "$ref": "#/definitions/ImageId"
        },
        "image": {
          "type": "string",
          "pattern": "^images/"
        },
        "names": {
          "$ref": "#/definitions/LocalizedName"
        },
        "wrongAnswers": {
          "$ref": "#/definitions/PlantIdArray"
        },
        "difficulty": {
          "type": "string",
          "minLength": 1
        },
        "questionVariantId": {
          "type": "string",
          "minLength": 1
        },
        "questionType": {
          "type": "string",
          "enum": [
            "plant"
          ]
        },
        "selectionGroupId": {
          "type": "string",
          "pattern": "^plant-"
        },
        "questionPromptKey": {
          "type": "string",
          "minLength": 1
        }
      }
    }
  }
}
